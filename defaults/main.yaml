---
# Repo
sensu_repo_url: http://repos.sensuapp.org/yum/el/$releasever/$basearch/
sensu_yumrepo_repos:
  sensu-main:
    name: sensu-main
    baseurl: "{{ sensu_repo_url }}"
    gpgcheck: 0

# Variables for installation of client/server
install_sensu_server: false
install_sensu_client: true

# Cert and key file
client_cert: client_cert.pem
client_key: client_key.pem

# Common defaults
sensu_config_dir: /etc/sensu
sensu_ssl_dir: /etc/sensu/ssl

# Sensu User
sensu_user: sensu
sensu_password: sensu
sensu_vhost: /sensu

# Sensu rabbitmq config
sensu_rabbitmq_cert_file: "{{ sensu_ssl_dir }}/{{ client_cert }}"
sensu_rabbitmq_key_file: "{{ sensu_ssl_dir }}/{{ client_key }}"

# Client defaults
rabbitmq_client_config:
  rabbitmq:
# Uncomment to enable ssl
#    ssl:
#      cert_chain_file: "{{ sensu_rabbitmq_cert_file }}"
#      private_key_file: "{{ sensu_rabbitmq_key_file }}"
    host: localhost
    port: 5671
    user: "{{ sensu_user }}"
    password: "{{ sensu_password }}"
    vhost: "{{ sensu_vhost }}"

# Client defaults
sensu_client_config:
  client:
    name: "{{ ansible_hostname }}"
    address: "{{ ansible_eth0.ipv4.address }}"
    subscriptions: [ "test" ]

# Server defaults for config.json
sensu_server_config:
  rabbitmq:
# Uncomment to enable ssl
#    ssl:
#      cert_chain_file: "{{ sensu_rabbitmq_cert_file }}"
#      private_key_file: "{{ sensu_rabbitmq_key_file }}"
    host: localhost
    port: 5671
    user: "{{ sensu_user }}"
    password: "{{ sensu_password }}"
    vhost: "{{ sensu_vhost }}"
  redis:
    host: localhost
    port: 6379
  api:
    host: localhost
    port: 4567
  handlers:
    default:
      type: pipe
      command: " true"      # Not an accident, macro needs this to have whitespace to work
